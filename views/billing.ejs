<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title><%= appName %> â€” Billing</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="stylesheet" href="/css/base.css" />
  <link rel="stylesheet" href="/css/components.css" />
  <link rel="stylesheet" href="/css/billing.css" />

  <style>
    @media print {
      body { background: #fff !important; }
      .app-header-bar,
      .add-row,
      .form-actions,
      #theme-toggle {
        display: none !important;
      }

      .invoice {
        box-shadow: none !important;
        background: #fff !important;
        border: 1px solid #000;
      }
    }
    
  </style>
</head>

<body>
<div class="app">

<!-- âœ… CONSISTENT HEADER -->
<header class="app-header-bar">
  <div class="app-brand">
    <span class="app-title"><%= appName %></span>
    <p class="app-tagline">Smart billing & inventory</p>
  </div>

  <nav class="main-nav">
    <a class="nav-link" href="/inventory">Inventory</a>
    <a class="nav-link" href="/catalog">Catalog</a>
    <a class="nav-link active" href="/billing">Billing</a>
    <a class="nav-link" href="/bills">Bills</a>
    <a class="nav-link" href="/sales">Sales</a>
  </nav>

  <div class="app-header-right">
    <form id="logout-form" method="POST" action="/logout">
      <button type="button" id="user-btn" class="user-menu-btn"
        data-username="<%= currentUser?.username || 'User' %>">
        <span class="user-avatar">
          <%= currentUser?.username?.charAt(0).toUpperCase() || "U" %>
        </span>
        <span id="user-btn-text"><%= currentUser?.username || "User" %></span>
      </button>
    </form>
    <div class="header-actions">
    <button id="theme-toggle">Dark Theme ðŸŒ™</button>
  </div>
  </div>
</header>

<main class="app-main">
<section class="panel invoice">

<h2 style="text-align:center">
  GST TAX INVOICE
</h2>

<div class="form-row">
  <input id="cust-name" placeholder="Customer Name" required>
<input id="cust-phone" placeholder="Phone" >
  <input id="cust-gst" placeholder="GSTIN">
</div>

<div class="form-row">
  <input id="cust-address" placeholder="Address">
</div>

<div class="form-row add-row">
  <input id="bill-query" placeholder="Item name or SKU">
  <input id="bill-qty" type="number" min="1" value="1">
  <button id="add-item">Add Item</button>
</div>

<table>
  <thead>
    <tr>
      <th>#</th>
      <th>Item</th>
      <th>SKU</th>
      <th>Qty</th>
      <th>Rate</th>
      <th>GST%</th>
      <th>Discount%</th>
      <th>Total</th>
      <th></th>
    </tr>
  </thead>
  <tbody id="bill-body"></tbody>
</table>

<div class="billing-summary">
  <div>Subtotal â‚¹<span id="sub">0.00</span></div>
  <div>GST â‚¹<span id="gst">0.00</span></div>
  <div>Discount â‚¹<span id="disc">0.00</span></div>
  <div class="grand">Grand â‚¹<span id="grand">0.00</span></div>
</div>

<div class="form-actions">
  <button id="save-print">Save & Print</button>
  <button id="clear" class="secondary">Clear</button>
</div>

<p style="text-align:center;margin-top:24px">Thank you for your business</p>

</section>
</main>
</div>

<script>window.billItems = [];</script>
<script src="/js/billing.js"></script>
<script src="/js/theme.js"></script>
<script src="/js/index.js"></script>
</body>
</html>